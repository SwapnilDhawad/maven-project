pipeline 
{
 agent any 
  stages 
  {
    stage('maven install'){
	   steps{
	    withMaven(jdk: 'JDKAWS', maven: 'MavenAWS'){
		  sh 'mvn install'}
	   }
	   }
	   
	stage('deploy to tomcat'){
	   steps{
	    sshagent(['ssh-pipline']) {
         sh 'scp -o StrictHostKeyChecking=no */target/*.war ec2-user@35.176.89.135:/var/lib/tomcat/webapps'
        }
		
		}
	   }
	}   
 }

